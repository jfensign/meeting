// Generated by CoffeeScript 1.10.0
(function() {
  var Participant, Participants, Standup, User;

  Participant = require('../models/participants');

  Standup = require('../models/standups');

  User = require('../models/users');

  Participants = (function() {
    var get, post;

    function Participants(router, resource) {
      this.router = router;
      this.resource = resource;
      this.router.post("/", post);
      this.router.get("/", get);
    }

    post = function(req, res) {
      return console.log("%s: %s", req.method.toUpperCase(), req.url);
    };

    get = function(req, res) {
      errors;
      var errors;
      req.checkQuery('userId', 'Required Query Parameter').notEmpty();
      errors = req.validationErrors();
      if (errors) {
        res.status(400).json({
          status: 400,
          message: errors
        });
        return;
      }
      return User.findById(req.query.userId, function(e, user) {
        console.error(e);
        return user.standups(function(e, standups) {
          console.error(e);
          console.log(standups);
          if (e) {
            return res.status(500).json(e);
          } else {
            return res.json(standups);
          }
        });
      });
    };

    Participants.prototype.get_routes = function() {
      return this.router;
    };

    return Participants;

  })();

  module.exports = Participants;

}).call(this);
